<html class="no-js" lang="zxx">
<head>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">    
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="site.webmanifest">
  <link rel="shortcut icon" type="../static/img/logo" href="../static/img/logo/logo_short.png">
  
  <title>Flood Safe Home</title>
      <!-- CSS here -->
      
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="static/css/slicknav.css">
    <link rel="stylesheet" href="static/css/flaticon.css">
    <link rel="stylesheet" href="static/css/progressbar_barfiller.css">
    <link rel="stylesheet" href="static/css/gijgo.css">
    <link rel="stylesheet" href="static/css/animate.min.css">
    <link rel="stylesheet" href="static/css/animated-headline.css">
    <link rel="stylesheet" href="static/css/magnific-popup.css">
    <link rel="stylesheet" href="static/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="static/css/themify-icons.css">
    <link rel="stylesheet" href="static/css/slick.css">
    <link rel="stylesheet" href="static/css/nice-select.css">
    <link rel="stylesheet" href="static/css/style.css">
    <script src="static/js/modernizr.js"></script> 
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://js.arcgis.com/4.18/esri/themes/light/main.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://js.arcgis.com/4.18/"></script>
    <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
    #viewDiv {
        padding: 0;
        margin: 0;
        height: 300px;
        width: 100%;
      }
      </style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $("#btnPrint").live("click", function () {
            var divContents = $("#dvContainer").html();
            var printWindow = window.open('', '', 'height=400,width=800');
            printWindow.document.write('<html><head><title>DIV Contents</title>');
            printWindow.document.write('</head><body >');
            printWindow.document.write(divContents);
            printWindow.document.write('</body></html>');
            printWindow.document.close();
            printWindow.print();
        });
    </script>
      
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
    <!--Add field-->
    <script type="text/javascript">
    $(document).ready(function(){
      //Input fields increment limitation
        var maxField = 10; 
        var addButton = $('.add_button'); 
        var wrapper = $('.field_wrapper'); 
        var fieldHTML = '<div> <input type="text" name="field_name[]" value="" placeholder="Type your address" required/> <a href="javascript:void(0);" class="remove_button"> &nbsp; <img src="static/img/logo/minus_icon.png"/></a></div>'; //New input field html 
        var x = 1; //Initial field counter is 1
        
        //Once add button is clicked and maxField is smaller than x, increment field counter
        $(addButton).click(function(){
            if(x < maxField){ 
                x++; 
                $(wrapper).append(fieldHTML); 
            }
        });
        
        //Once remove button is clicked, remove the field html
        $(wrapper).on('click', '.remove_button', function(e){
            e.preventDefault();
            $(this).parent('div').remove();
            x--; 
        });
    });
    </script>


{% load humanize %}
<!--ArcGIS API-->
  <script>
    require([

      "esri/config",
      "esri/Map",
      "esri/views/MapView",
      "esri/widgets/Sketch",
      "esri/layers/GraphicsLayer",
      "esri/layers/FeatureLayer",
      "esri/widgets/BasemapToggle",
      "esri/widgets/BasemapGallery",
      "esri/widgets/LayerList",
      "esri/widgets/Legend",
      "esri/widgets/Expand",
      "esri/widgets/Search"

    ], function(esriConfig,Map, MapView, Sketch, GraphicsLayer, FeatureLayer,BasemapToggle, BasemapGallery, LayerList, Legend, Expand, Search) {

      esriConfig.apiKey = "AAPKd5dd565a8e68435fa989ce6a460dee71GW1954NPzAcw3QEQG_Cawyxn2iw7zS83Hnr53ia1CJ6-B8iTjxlIBdY41LiuJ_M6";

      const map = new Map({
        basemap: "arcgis-topographic" //Basemap layer service
      });

      const view = new MapView({
        container: "viewDiv",
        map: map,
        center: [-90.2,30.00], //Longitude, latitude
        zoom: 13
      });

      // Add sketch widget
      const graphicsLayerSketch = new GraphicsLayer();
      map.add(graphicsLayerSketch);

      const sketch = new Sketch({
        layer: graphicsLayerSketch,
        view: view,
        creationMode: "update" // Auto-select
      });

      view.ui.add(sketch, "top-right");

      // Add sketch events to listen for and execute query
      sketch.on("update", (event) => {

        // Create
        if (event.state === "start") {
          queryFeaturelayer(event.graphics[0].geometry);
        }
        if (event.state === "complete"){
          graphicsLayerSketch.remove(event.graphics[0]); // Clear the graphic when a user clicks off of it or sketches new one
        }
        // Change
        if (event.toolEventInfo && (event.toolEventInfo.type === "scale-stop" || event.toolEventInfo.type === "reshape-stop" || event.toolEventInfo.type === "move-stop")) {
          queryFeaturelayer(event.graphics[0].geometry);
        }

      });

      // Reference query layer
      const parcelLayer = new FeatureLayer({
         url: "https://services2.arcgis.com/njxlOVQKvDzk10uN/arcgis/rest/services/BUILDING_shp/FeatureServer/0",     //Building
        //parecel url: "https://services2.arcgis.com/njxlOVQKvDzk10uN/ArcGIS/rest/services/PARCEL/FeatureServer/0",
      });

      function queryFeaturelayer(geometry) {

        const parcelQuery = {
         spatialRelationship: "intersects", // Relationship operation to apply
         geometry: geometry,  // The sketch feature geometry
         outFields: ["ADDRESS","STREET", "SFT"], // Attributes to return
         //parcel outFields: ["SITE_ID","SUBDIVISIO"], // Attributes to return
         returnGeometry: true
        };

        parcelLayer.queryFeatures(parcelQuery)
        .then((results) => {


          displayResults(results);

        }).catch((error) => {
          console.log(error);
        });

      }

      // Show features (graphics)
      function displayResults(results) {

      // Create a blue polygon
        const symbol = {
          type: "simple-fill",
          color: [ 20, 130, 200, 0.5 ],
          outline: {
            color: "white",
            width: .5
          },
        };


        //Building
        const popupTemplate = {
          title: "<b> {ADDRESS} {STREET} </b>",
          content: "Sqaure fottage:  {SFT}"
        };

                
        //Parcel
       // const popupTemplate = {
       //   title: "<b>{SITE_ID} </b>",
       //   content: "Subdivision:  {SUBDIVISIO}"
       // }; 

        // Set symbol and popup
        results.features.map((feature) => {
          feature.symbol = symbol;
          feature.popupTemplate = popupTemplate;
          return feature;
        });

        // Clear display
        view.popup.close();
        view.graphics.removeAll();

       // Add features to graphics layer
        view.graphics.addMany(results.features);

      }
      
      
      //basemap toggle
      const basemapToggle = new BasemapToggle({
        view: view,
        nextBasemap: "arcgis-imagery"
     });

      view.ui.add(basemapToggle,"bottom-right");
    });
  </script>

<!--screenshot to pdf

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>
      
html2canvas {
     width: 100px !important;
     height: 200px !important;
}

</style>

screenshot to pdf ends-->
</head>

<body>   

<!--screenshot to pdf-->
{% comment %} <a href="javascript:genScreenshot()"><button style="background:aqua; cursor:pointer">Get Screenshot</button> </a>
<a id="test"></a>

<div id="box1">
</div> {% endcomment %}
<!--screenshot to pdf ends-->

     <header class="header header-map">

<main>
      <form action="/exportpdf">
          {% comment %} <input type="submit" style="float: right;" value="Export PDF" id="downloadPDF" /> {% endcomment %}
          <input type="button" value="Export PDF" id="btnPrint" />
      </form> 
    

    
      <div class="left2 section-tittle mb-40" id="dvContainer">
      <h2>Freeboard Cost Analysis Report</h2>
      <hr class="style-four">
     

      <!--Esri map-->
      <div id="viewDiv" >
       </div>
       <!--Esri map-->
      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
      <hr class="style-four">
     


         <h2 class="map-style-title" >Individual Building Information</h2>
         
         <div style="overflow-x:auto;">
  
      {% for individual in listindividual %}
       <table class="table-slide">
           <tr class="table-slide-bg">
            <tr>
                <td> 
                <b class="map-style"> 
                {% comment %} <strong>Location: </strong>{{ individual.0 }}<br> {% endcomment %}
                <h1 style="background-color:powderblue;"><strong>Location: </strong>{{ individual.0 }}</h1>
                Zone : {{ individual.1 }}<br>
                Recommended freeboard: {{ individual.2 }}<br>
                Optimal saving: {{ individual.3 }} <br>
                Freeboard construction cost: {{ individual.4 }} <br>
                Total annual insurance premium : {{ individual.5 }} <br>
                Expected annual flood loss : {{ individual.6 }} <br>
                Time to recover the freeboard cost : {{ individual.7 }} <br>  </td>          
                </tr>
            </tr>
            </table>
       {% endfor %}

 
         <hr class="style-four">


         <h2 class="map-style-title" >Other Common Building Information</h2>
   <!--Interactive slide-->  
      <div style="overflow-x:auto;">  
          <table class="table-slide">
           
          <tr class="table-slide-bg">
            <td><b class="map-style">Home square footage:</b></td>
            <td>{{SquareFootage}} SF</td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
           <tr>
            <td><b class="map-style">Number of stories: </b></td>
            <td>{{No_Floors}}</td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
         
          <tr>
            <td><b class="map-style">Insurance:  </b></td>
            <td> Without insurance </td>
            {% comment %} <td><input type="radio" id="Yes_ins" name="insuracnce_option" value="Yes_ins"> <label for="Yes_ins">With insurance</label>
                <input type="radio" id="No_ins" name="insuracnce_option" value="No_ins" style="margin: 0px 0px 0px 100px;"> <label for="No_ins" >Without insurance</label>
            </td>
            <td>Min</td>
            <td></td>
            <td>Max</td>
            <td colspan="3"></td> {% endcomment %}

          </tr>
           <tr class="table-slide-bg">
            <td><b class="map-style">Expected occupancy timeline: </b></td>
            <td> 30 years </td>
            {% comment %} <td ><input id="years" type="number" value="30" min="0" max="100" oninput="rangeInput1.value=years.value" />  Years</td>
            <td>0 Years</td> 
            <td><input id="rangeInput1" type="range" min="0" max="100" value="30" oninput="years.value=rangeInput1.value" /></td> 
            <td>100 Years</td> {% endcomment %}
          </tr>
          <tr>
            <td rowspan="5"><b class="map-style">Flood insurance coverage:</b></td>
            <td>Building coverage:  $ {{BuildingCoverage}}</td>
            {% comment %} <td>Building coverage:  $ <input id="bldgCost" type="number" value={{BuildingCoverage}} min="0" max="250000" oninput="rangeInput2.value=bldgCost.value" /></td> {% endcomment %}
            {% comment %} <td>$0 </td>
            <td><input id="rangeInput2" type="range" min="0" max="250000" value={{BuildingCoverage}} oninput="bldgCost.value=rangeInput2.value" /></td>
            <td>$250,000 </td> {% endcomment %}
          </tr>
          <tr>
            <td>Building deductible:  $ {{BuildingDeductibe}}</td>
            {% comment %} <td>
              <label for="DeductibleValue">Building deductible:&nbsp; &nbsp;$ </label> {% endcomment %}
              
                {% comment %} <select name="DeductibleValue" id="DeductibleValue" placeholder={{BuildingDeductibe}}>
                  <option value="V1">1,000</option>
                  <option value="V2">1,250</option>
                  <option value="V3">1,500</option>
                  <option value="V4">2,000 </option>
                  <option value="V5">3,000 </option>
                  <option value="V6">4,000 </option>
                  <option value="V7">5,000 </option>
                  <option value="V8">10,000 </option>
                </select> {% endcomment %}
            </td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
          <td>Content coverage:  $ {{ContentCoverage}}</td>
            {% comment %} <td>Content coverage:  $ <input id="contCost" type="number" value={{ContentCoverage}} min="0" max="100000" oninput="rangeInput3.value=contCost.value" /></td>
            <td>$0 </td>
            <td><input id="rangeInput3" type="range" min="0" max="100000" value={{ContentCoverage}} oninput="contCost.value=rangeInput3.value" /> </td>
            <td>$100,000 </td> {% endcomment %}
          </tr>
          <tr>
           
            <td>Content deductible:  $ {{ContentDeductible}}</td>
              {% comment %} <label for="DeductibleValue">Content deductible:&nbsp; &nbsp;$ </label>
                <select name="DeductibleValue" id="DeductibleValue" placeholder={{ContentDeductible}}>
                  <option value="V1">1,000</option>
                  <option value="V2">1,250</option>
                  <option value="V3">1,500</option>
                  <option value="V4">2,000 </option>
                  <option value="V5">3,000 </option>
                  <option value="V6">4,000 </option>
                  <option value="V7">5,000 </option>
                  <option value="V8">10,000 </option>
                </select> {% endcomment %}
            </td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td>CRS rate is {{CRS}}
                {% comment %} <select name="crsRate" id="crsRate" onchange="myFunction()">
                  <option value="null"> - </option>
                  <option value="45">1</option>
                  <option value="40">2</option>
                  <option value="35">3</option>
                  <option value="30">4 </option>
                  <option value="25">5</option>
                  <option value="20">6</option>
                  <option value="15">7</option>
                  <option value="10">8</option>
                  <option value="5">9</option>
                  <option value="0">10</option>
                </select>            
             <span id="crsRate_value" ></span> </td> {% endcomment %}
            <td></td>
            <td></td>
            <td></td>
          </tr> 

        </table> 
      <p class=" map-style">
       ● The location entered is in a/an {{floodzone}} flood zone, and insurance not/is mandatory.<br>
       ● Maximum limits of $250,000 for building and $100,000 for content with deductible of $1,250. <br>
       ● The property is located in a community that is currently participating in the Community Rating System (CRS) discount. <br>
       ● The CRS rate is 5, with a 25% discount on flood insurance. 
      </p>
      <br><br>
        
     
      </div>   

    </div>
    

<!--Result details-->
<!--Summary-->


  <div style="overflow-x:auto;">
  
 <hr class="style-four">
  <h2 class="map-style-title" >Overall Freeboard Cost Results and Analysis</h2>

  
    <div class="optimal map-style">For your home,  <b class="summary-b">{{OptimalFreeboard}} ft </b> </span> of freeboard is recommended<br>
          resulting in monthly savings of <b class="summary-b">${{OptimalSaving}} </b> </u></div> <br>
     <div class="row2">
      <div class="pricing column2" style="width: 450px; margin: 10px; padding: 30px" > 

      <div class="pricing-slider" >
      
        <center><label class="form-slider" >
          <img id='img_pdf' src='static/img/construction/twofeet_white.png' style="width: 250px; height: 250px;"/><br><br>
          <center><div class="pricing-slider-value" ></div></center> <br>
          <datalist id="scale">
            <option>0</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
          </datalist>
          <input onchange='setImage(this)'
            type="range"
            value="{{OptimalFreeboard}}"
            class="slider" id="myRange" list="scale"
            data-price-input='{
                "0": "0ft freeboard",
                "1": "1ft freeboard",
                "2": "2ft freeboard",
                "3": "3ft freeboard",
                "4": "4ft freeboard"                
              }'
          />
        </label></center>
        
      </div>
      </div>

      
  <div class="column2" style="width: 750px; margin: 10px; padding: 20px" >
          
    <!--Monthly premium savings-->

    <!--  for calculations with below BFE   -->
    <!--  <div
        class="pricing-item-price" 
        data-price-output='{
          "-4": ["$", {{summation_total_monthly_premium_saving0}},""],
          "-3": ["$", {{summation_total_monthly_premium_saving1}},""],
          "-2": ["$", {{summation_total_monthly_premium_saving2}},""],
          "-1": ["$", {{summation_total_monthly_premium_saving3}},""],
          "0": ["$", {{summation_total_monthly_premium_saving4}},""], 
          "1": ["$", {{summation_total_monthly_premium_saving5}},""],
          "2": ["$", {{summation_total_monthly_premium_saving6}},""],
          "3": ["$", {{summation_total_monthly_premium_saving7}},""],
          "4": ["$", {{summation_total_monthly_premium_saving8}},""]
        }'
      > -->

      <!--  for calculations without below BFE   -->
      <div style="overflow-x:auto; "
        class="pricing-item-price" 
        data-price-output='{
          "0": ["$", {{summation_total_monthly_premium_saving0}},""],
          "1": ["$", {{summation_total_monthly_premium_saving1}},""],
          "2": ["$", {{summation_total_monthly_premium_saving2}},""],
          "3": ["$", {{summation_total_monthly_premium_saving3}},""],
          "4": ["$", {{summation_total_monthly_premium_saving4}},""] 
           }'
      > 

    <p class="grid-style3 map-style"> When you add <b class="map-style b-summary-value2"> <span id="demo"> </span> ft</b> of  freeboard, </p>
    
    <div class="vl">  
      <p class="grid-style3 map-style" ><b class="b-summary-title map-style">Savings</b> <br>
        <b class="b-summary-value map-style">        
        <span class="pricing-item-price-currency">$</span><!-- 
     --><span class="pricing-item-price-amount">0</span><!-- 
     --><span class="pricing-item-price-after"></span> </b> insurance savings per month</p>
    
    <!--Flood loss-->

    <!--  for calculations with below BFE   -->
    <!--  <div
        class="pricing-item-price"
        data-price-output='{
          "-4": ["$", {{summation_monthly_avoided_loss0}},""],
          "-3": ["$", {{summation_monthly_avoided_loss1}},""],
          "-2": ["$", {{summation_monthly_avoided_loss2}},""],
          "-1": ["$", {{summation_monthly_avoided_loss3}},""],
          "0": ["$", {{summation_monthly_avoided_loss4}},""],
          "1": ["$", {{summation_monthly_avoided_loss5}},""],
          "2": ["$", {{summation_monthly_avoided_loss6}},""],
          "3": ["$", {{summation_monthly_avoided_loss7}},""],
          "4": ["$", {{summation_monthly_avoided_loss8}},""]
          }'
      > -->
        <!--  for calculations without below BFE   -->
      <div
        class="pricing-item-price"
        data-price-output='{
          "0": ["$", {{summation_monthly_avoided_loss0}},""],
          "1": ["$", {{summation_monthly_avoided_loss1}},""],
          "2": ["$", {{summation_monthly_avoided_loss2}},""],
          "3": ["$", {{summation_monthly_avoided_loss3}},""],
          "4": ["$", {{summation_monthly_avoided_loss4}},""]
          }'
      >


      <p class="grid-style3 map-style">
      <b class="b-summary-value map-style"> 
        <span class="pricing-item-price-currency">$</span><!-- 
     --><span class="pricing-item-price-amount">0</span><!-- 
     --><span class="pricing-item-price-after"></span> </b> reduction in expected flood losses per month </p>
      </div>
    </div>    
   <br>

    <div class="vl"> 
      <!--amortized cost-->

          <!--  for calculations with below BFE   -->
       <!-- <div
        class="pricing-item-price"
        data-price-output='{
         "-4": ["$", {{summation_Amortized_FC0}},""],
          "-3": ["$", {{summation_Amortized_FC1}},""],
          "-2": ["$", {{summation_Amortized_FC2}},""],
          "-1": ["$", {{summation_Amortized_FC3}},""],
          "0": ["$", {{summation_Amortized_FC4}},""],
          "1": ["$", {{summation_Amortized_FC5}},""],
          "2": ["$", {{summation_Amortized_FC6}},""],
          "3": ["$", {{summation_Amortized_FC7}},""],
          "4": ["$", {{summation_Amortized_FC8}},""]
        }'
      > -->

       <!--  for calculations without below BFE   -->
      <div
        class="pricing-item-price"
        data-price-output='{
         "0": ["$", {{summation_Amortized_FC0}},""],
          "1": ["$", {{summation_Amortized_FC1}},""],
          "2": ["$", {{summation_Amortized_FC2}},""],
          "3": ["$", {{summation_Amortized_FC3}},""],
          "4": ["$", {{summation_Amortized_FC4}},""]
        }'
      > 



      <p class="grid-style3 map-style" ><b class="b-summary-title map-style">Costs</b> <br>
      <b class="b-summary-value map-style">      
        <span class="pricing-item-price-currency">$</span><!-- 
     --><span class="pricing-item-price-amount">0</span><!-- 
     --><span class="pricing-item-price-after"></span> </b> amortized cost per month</p>
      </div>   

      <!--Freeboard cost-->
      {% load humanize %}

      <!--  for calculations with below BFE   -->

      <!--
         <div
        class="pricing-item-price"
        data-price-output='{
         "-4": ["$", {{summation_freeboardCost0}},""],
          "-3": ["$", {{summation_freeboardCost1}},""],
          "-2": ["$", {{summation_freeboardCost2}},""],
          "-1": ["$", {{summation_freeboardCost3}},""],
          "0": ["$", {{summation_freeboardCost4}},""],
          "1": ["$", {{summation_freeboardCost5}},""],
          "2": ["$", {{summation_freeboardCost6}},""],
          "3": ["$", {{summation_freeboardCost7}},""],
          "4": ["$", {{summation_freeboardCost8}},""]
        }'
      >
      -->

      <!--  for calculations without below BFE   -->
      <div
        class="pricing-item-price"
        data-price-output='{
         "0": ["$", {{summation_freeboardCost0}},""],
          "1": ["$", {{summation_freeboardCost1}},""],
          "2": ["$", {{summation_freeboardCost2}},""],
          "3": ["$", {{summation_freeboardCost3}},""],
          "4": ["$", {{summation_freeboardCost4}},""]
        }'
      >
      <!--Part of title...Freeboard cost is calculated as a total loan amount with 30-year term and 3% interest rate. The cost of the freeboard with no loan is $7490" --> 
      <p class="grid-style3 map-style b-summary-const">
         (based on <b class="map-style b-summary-value2">
        <span class="pricing-item-price-currency">$</span><!-- 
     --><span class="pricing-item-price-amount">0</span><!-- 
     --><span class="pricing-item-price-after"></span> </b>construction cost)  </p>
      </div>   
    </div><br>

    <div class="vl">      
     <!--  for calculations with below BFE   -->
     <!-- 
       <div
        class="pricing-item-price"
        data-price-output='{
          "-4": ["$", {{summation_total_savings_permonth_insurance0}},""],
          "-3": ["$", {{summation_total_savings_permonth_insurance1}},""],
          "-2": ["$", {{summation_total_savings_permonth_insurance2}},""],
          "-1": ["$", {{summation_total_savings_permonth_insurance3}},""],
          "0": ["$", {{summation_total_savings_permonth_insurance4}},""],
          "1": ["$", {{summation_total_savings_permonth_insurance5}},""],
          "2": ["$", {{summation_total_savings_permonth_insurance6}},""],
          "3": ["$", {{summation_total_savings_permonth_insurance7}},""],
          "4": ["$", {{summation_total_savings_permonth_insurance8}},""]
        }'
      >
     -->

      <!--  for calculations without below BFE   -->
      <div
        class="pricing-item-price"
        data-price-output='{
          "0": ["$", {{summation_total_savings_permonth_insurance0}},""],
          "1": ["$", {{summation_total_savings_permonth_insurance1}},""],
          "2": ["$", {{summation_total_savings_permonth_insurance2}},""],
          "3": ["$", {{summation_total_savings_permonth_insurance3}},""],
          "4": ["$", {{summation_total_savings_permonth_insurance4}},""]
        }'
      >

      <p class="grid-style3 map-style"><b class="b-summary-title map-style">Total</b> <br>
      <b class="b-summary-value map-style">      
        <span class="pricing-item-price-currency">$</span><!-- 
     --><span class="pricing-item-price-amount">0</span><!-- 
     --><span class="pricing-item-price-after"></span> </b> savings per month (flood insurance only) </p>
      </div>

       <!--Flood loss-->

       <!--  for calculations with below BFE   -->
      <!--
         <div
        class="pricing-item-price"
        data-price-output='{
          "-4": ["$", {{summation_total_monthly_saving0}},""],
          "-3": ["$", {{summation_total_monthly_saving1}},""],
          "-2": ["$", {{summation_total_monthly_saving2}},""],
          "-1": ["$", {{summation_total_monthly_saving3}},""],
          "0": ["$", {{summation_total_monthly_saving4}},""],
          "1": ["$", {{summation_total_monthly_saving5}},""],
          "2": ["$", {{summation_total_monthly_saving6}},""],
          "3": ["$", {{summation_total_monthly_saving7}},""],
          "4": ["$", {{summation_total_monthly_saving8}},""]
        }'
      >
      -->

       <!--  for calculations without below BFE   -->
      <div
        class="pricing-item-price"
        data-price-output='{
          "0": ["$", {{summation_total_monthly_saving0}},""],
          "1": ["$", {{summation_total_monthly_saving1}},""],
          "2": ["$", {{summation_total_monthly_saving2}},""],
          "3": ["$", {{summation_total_monthly_saving3}},""],
          "4": ["$", {{summation_total_monthly_saving4}},""]
        }'
      >

      <p class="grid-style3 map-style">
      <b class="b-summary-value map-style"> 
        <span class="pricing-item-price-currency">$</span><!-- 
     --><span class="pricing-item-price-amount">0</span><!-- 
     --><span class="pricing-item-price-after"></span> </b> savings per month (flood insurance and flood loss reduction) </p>
      </div>

      <!--Time to recover
      <div
        class="pricing-item-price"
        data-price-output='{
          "0": ["", {{time_to_recover_FC_MS0}},"month(s)"],
          "1": ["", {{time_to_recover_FC_MS1}},"month(s)"],
          "2": ["", {{time_to_recover_FC_MS2}},"month(s)"],
          "3": ["", {{time_to_recover_FC_MS3}},"month(s)"],
          "4": ["", {{time_to_recover_FC_MS4}},"month(s)"]
        }'
      >
      <p class="grid-style3 map-style">
      <b class="map-style b-summary-value2"> 
        <span class="pricing-item-price-currency">$</span>
      <span class="pricing-item-price-amount">0</span>
      <span class="pricing-item-price-after"></span> </b> time  to recover the elevation cost <img id='img' src='static/img/logo/blue_question.png' class="img-q"  title="Time To Recover The Cost is the Time required to offset the freeboard cost through the monthly savings."/>
      </div>-->

      <!-- Life time benefit
      <div
        class="pricing-item-price"
        data-price-output='{
          "0": ["$", {{netbenefit0}},""],
          "1": ["$", {{netbenefit1}},""],
          "2": ["$", {{netbenefit2}},""],
          "3": ["$", {{netbenefit3}},""],
          "4": ["$", {{netbenefit4}},""]
        }'
      >
      <p class="grid-style3" title="">| Lifetime benefits of the elevation <img id='img' src='static/img/logo/blue_question.png' class="img-q"/> : 
        <span class="pricing-item-price-currency"></span>
        <span class="pricing-item-price-amount">0</span>
        <span class="pricing-item-price-after">month(s)</span>
      </div> -->
      </div>
    </div><br><br><br>
   </div>  
  </div> 


<!--Monthly saving-->
  <div style="overflow-x:auto;">
   <hr class="style-four">
     <h2 class="map-style-title" >Monthly Savings</h2>
      <div class="graph-description" >
        While the increase in your monthly mortgage payment for adding freeboard will be minor, the monthly savings are substantial, ranging from 
        <b class="map-style">${{summation_total_monthly_saving_low}}</b> to <b class="map-style">${{Optimalsavingsumm}}</b>.BFE stands for <b>B</b>ase <b>F</b>lood <b>E</b>levation.
        <!--The optimal (maximum) monthly savings is ${{OptimalSaving | intcomma}} at freeboard height {{OptimalFreeboard}} ft.--> 
        </div>
      <center><div style="width:50%;"><div id="chart5" ></div><div class="bfe"></div>
    </div></center>
     
 
  </div> 

<!--Freeboard cost-->
  <div style="overflow-x:auto;">
   <hr class="style-four">
     <h2 class="map-style-title">Freeboard Cost</h2> 
      <div class="graph-description">
        
        The expense of incorporating freeboard into new structures is surprisingly low. The construction cost of increasing elevation for your home ranges from 
        <b class="map-style">${{summation_freeboardCostlow | intcomma}}</b> to <b class="map-style">${{summation_freeboardCosthigh | intcomma}}</b>.
        <!-- The optimal (maximum) freeboard cost is ${{optimal_freeboardCost |intcomma}} at freeboard height {{optimal_freeboard_freeboardCost}} ft. -->
      </div>  
     <center><div style="width:60%;"><div id="chart1" class="chart1"></div></div></center>
  </div>

<!--Insurance-->
  <div style="overflow-x:auto;">
   <hr class="style-four">
    <h2 class="map-style-title">Annual Insurance Premiums</h2>
     <div class="graph-description" >
       Constructing your home with additional freeboard decreases annual insurance premiums from <b class="map-style">${{summation_total_annual_premiumlow | intcomma}}</b> to <b class="map-style">${{summation_total_annual_premiumhigh | intcomma}}</b>. 
       <!--, also increases or stabilizes flood premiums savings per month ${{monthly_premium_saving0 | intcomma}} to ${{monthly_premium_saving4 | intcomma}}.--> 
       <!--The optimal (minimum) annual insurance premium is ${{optimal_total_annual_premium | intcomma}} at freeboard height {{optimal_total_annual_premium_freeboard}} ft.-->
      
     </div>
      <center><div style="width:60%;">
      <div id="chart2" class="chart2"></div>
      </div> </center>
  </div>

<!--Reduction in expected flood losses-->
<div style="overflow-x:auto;">
  <hr class="style-four">
     <h2 class="map-style-title">Expected Annual Flood Loss</h2>
       
        <div class="graph-description" >
          Adding a freeboard also reduces flood losses in flooding events from <b class="map-style">${{summation_AAL_absCurrencyhigh | intcomma}}</b> to <b class="map-style">${{summation_AAL_absCurrencylow | intcomma}}</b>. 
          <!--The optimal (minimum) expected flood loss is ${{optimal_AAL_absCurrency | intcomma}} at freeboard height {{optimal_AAL_absCurrency_freeboard}} ft.-->
        </div>
    <center><div style="width:60%;"><div id="chart3" class="chart3"></div></div>  </center>
      
  </div>

<!--Recover-->
<div style="overflow-x:auto;">
  <hr class="style-four">
     <h2 class="map-style-title">Time to Recover the Freeboard Cost</h2>
      <div class="graph-description" >
        The time required to recover the cost of freeboard is surprisingly low for new construction when considering reductions in flood insurance premiums and the expected reductions in flood loss. 
        Considering <b class="map-style">ONLY</b> flood insurance premium savings, the time to recover the additional cost of construction ranges between <b class="map-style">{{summation_time_to_recover_FC_PSlow}}</b> month(s) and <b class="map-style">{{summation_time_to_recover_FC_PShigh}} month(s)</b>. 
        Considering both savings in flood insurance premiums and expected reductions in flood loss, this is decreased to between <b class="map-style">{{summation_time_to_recover_FC_TBlow}}</b> month(s) and <b class="map-style">{{summation_time_to_recover_FC_TBhigh}} month(s)</b>.       
      </div>
     <center><div style="width:60%;"><div id="chart4" class="chart4"></div></div></center>
  </div>

<!--Overall-->
  <div style="overflow-x:auto;">
    <hr class="style-four">
     <h2 class="map-style-title">Overall Graph</h2>
     <center><div style="width:60%;"><div id="myChart" class="chart--container1"></div></div></center>
  </div>
</main>

<!--Result details End-->

<!--zingchart script-->
  <script>
   /*zingchart*/
  // DEFINE CHART LOCATIONS (IDS)
  // -----------------------------
  // Main chart render location
  // var chartId = 'myChart';
  var chart1Id = 'chart1'; //Freeboard Cost
  var chart2Id = 'chart2'; //Annual Insurance Premiums
  var chart3Id = 'chart3'; //Expected Annual Flood Loss
  var chart4Id = 'chart4'; //Time to Recover the Freeboard Cost
  var chart5Id = 'chart5'; //Monthly Savings
  var chart6Id = 'chart6'; //Overall graph

  // CHART CONFIG
  // -----------------------------


  // Chart 1
  var chart1Data = {
    type: 'bar',
    title: {
      fontWeight: 'normal',
      fontColor: 'var(--black)',
      align: 'left',
      marginLeft: '2rem'
    },
    cursor: 'hand',
    globals: {
      fontColor: 'var(--fontColor)',
      fontfamily: 'Raleway'
    },
    legend: {
      borderWidth: 0,
      layout: '1',
      marker: {
        type: 'pie'
      }
    },
    scaleX: { 
      markers: [],
       labels: [ 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
      //labels: ['BFE -4 ft', 'BFE -3 ft', 'BFE -2 ft', 'BFE -1 ft', 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
      tick: {
        visible: false
      },
    crosshairX: {},
    },
    scaleY: {
    format: "$%v",
    negation: "currency",
    thousandsSeparator: ", ",
    multiplier: true
    },
    plot: {
    tooltip:{ 
      fontColor: 'var(--white)',
      text: '$%v',
      thousandsSeparator: ", ",
      backgroundColor:'var(--red)'
      },
    animation : {
      effect : 1,
      sequence : 2,
      speed : 100
    },
  },
    series: [
      {
        text: 'Freeboard cost',
        backgroundColor: 'var(--red)',
        alpha: 0.95,
        borderRadiusTopLeft: '7px',
        values: {{freeboardCost_json}}   
      }
    ]
  };

  // Chart 2
   var chart2Data = {
    type: 'bar',
    title: {
      fontWeight: 'normal',
      fontColor: 'var(--black)',
      align: 'left',
      marginLeft: '2rem'
    },
    cursor: 'hand',
    globals: {
      fontColor: 'var(--fontColor)',
      fontfamily: 'Raleway'
    },
    legend: {
      borderWidth: 0,
      layout: '1',
      marker: {
        type: 'pie'
      }
    },
    scaleX: { 
      markers: [],
      labels: ['BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
   // labels: ['BFE -4 ft', 'BFE -3 ft', 'BFE -2 ft', 'BFE -1 ft', 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
      tick: {
        visible: false
      },
    crosshairX: {},
    },
    scaleY: {
    format: "$%v",
    negation: "currency",
    thousandsSeparator: ", ",
    multiplier: true
    },
    plot: {
    tooltip:{ 
      fontColor: 'var(--white)',
      text: '$%v',
      thousandsSeparator: ", ",
      backgroundColor:'var(--blue)'
      },
    animation : {
      effect : 1,
      sequence : 2,
      speed : 100
    },
  },
    series: [
      {
        text: 'Annual insurance premiums',
        backgroundColor: 'var(--blue)',
        alpha: 0.95,
        borderRadiusTopLeft: '7px',
        values: {{total_annual_premium_json}}   
      }
    ]
  }; 
 

  // Chart 3
  let chart3Data = {
  type: 'bar',
  legend: {
    alpha: 0.05,
    borderWidth: '0px',
    layout: 'x2',
    marker: {
      type: 'circle',
      borderColor: 'none',
      size: '10px'
    },
  },
  plot: {
    animation: {
      effect: 'ANIMATION_SLIDE_BOTTOM'
    }
  },
  scaleX: {
    guide: {
      visible: false
    },
    item: {
      fontColor: '#7e7e7e'
    },
    labels: ['BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
    // labels: ['BFE -4 ft', 'BFE -3 ft', 'BFE -2 ft', 'BFE -1 ft', 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
    lineColor: '#7E7E7E'
  },
  scaleY: {
      
    format: "$%v",
    negation: "currency",
    thousandsSeparator: ", ",
    multiplier: true,
      guide: {
        lineStyle: 'solid'
      },
      minorTick: {
        placement: 'cross',
        size: '6px'
      },
      minorTicks: 1
    },
  tooltip: {
    text: '$%v'
  },
  series: [
    {
      text: 'Annual flood loss with insurance',
      values: [ 0, 0, 0, 0, 0],
      //values: [185537, 144022, 97204, 31222, 0, 0, 0, 0, 0],
      alpha: 0.95,
      borderRadiusTopLeft: '7px',
      backgroundColor: '#eb9d17',
    },
    {
      text: 'Annual flood loss without insurance',
      values: {{AAL_absCurrency_json}},
      borderRadiusTopLeft: '7px',
      alpha: 0.95,
      backgroundColor: '#f7e0b7',
    }
  ]
};

   // Chart 4
var chart4Data = {
  type: 'line',
  title: {
    fontWeight: 'normal',
    fontColor: 'var(--black)',
    align: 'left',
    marginLeft: '2rem'
  },
  plot: {
    tooltip: {
      visible: false
    },
    cursor: 'hand'
  },

  legend: {
    borderWidth: 0,
    layout: '1',
     width: '100%',
     x: '8%',
    marker: {
      type: 'pie'
    }
  },
  scaleX: {
    markers: [],
    labels: [ 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
    // labels: ['BFE -4 ft', 'BFE -3 ft', 'BFE -2 ft', 'BFE -1 ft', 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
  },
  crosshairX: {},
  scaleY: {
    label: {
      text: "Month(s)",
      fontWeight: 'normal'
    },
  },
  series: [
    {
      text: 'The reduction in insurance premiums ',
      values: {{time_to_recover_FC_PS_json}},
      lineColor: 'var(--orange)',
      marker : {
      type : 'circle',
      borderWidth : 1,
      borderColor : 'var(--orange)',
      size : 5,
      backgroundColor : 'var(--orange)'
      },
      hoverMarker : {
        type : 'circle',
        size : 6,
        backgroundColor : '#FFF',
        borderWidth : 1,
        borderColor : 'var(--orange)'
      },
    },
    {
      text: 'The reduction in insurance premiums and the reduction of flood losses',
      values: {{time_to_recover_FC_TB_json}},
      lineColor: '#c4c722',
      marker : {
      type : 'circle',
      borderWidth : 1,
      borderColor : '#c4c722',
      size : 5,
      backgroundColor : '#c4c722'
      },
      hoverMarker : {
        type : 'circle',
        size : 6,
        backgroundColor : '#FFF',
        borderWidth : 1,
        borderColor : '#c4c722'
      },
    }    
  ]
};

/*
* define Marker class to construct
* markers on the fly easier.
*/
function Marker(_index) {
  return {
    type: 'line',
    flat: false,
    lineColor: '#424242',
    lineWidth: '1px',
    range: [_index]
  }
}

/*
* define Label class to construct
* labels on the fly easier.
*/
function Label(_text, _id, _offsetX, _offsetY) {
  return {
    id: _id,
    text: _text,
    angle: 0,
    padding: '5px 10px 5px 10px',
    backgroundColor: '#eeeeee',
    cursor: 'pointer',
    flat: false,
    fontSize: '13px',
    fontStyle: 'bold',
    offsetX: _offsetX,
    offsetY: _offsetY ? _offsetY : 0,
    textAlign: 'right',
    wrapText: true
  }
}

// format the label text
let formatLabelText = (_nodeindex, _scaleText) => {
  let plotInfo = null;
  let nodeInfo;
  let seriesText = '';
  let labelString = isNaN(_scaleText) ? _scaleText + '<br>' : '';
  let color = '';
  let plotLength = zingchart.exec('chart4Data', 'getplotlength', {
    graphid: 0
  });

  for (let i = 0; i < plotLength; i++) {
    plotInfo = zingchart.exec('chart4Data', 'getobjectinfo', {
      object: 'plot',
      plotindex: i
    });
    nodeInfo = zingchart.exec('chart4Data', 'getobjectinfo', {
      object: 'node',
      plotindex: i,
      nodeindex: _nodeindex
    });
    color = plotInfo.lineColor ? plotInfo.lineColor : plotInfo.backgroundColor1;
    seriesText = plotInfo.text ? plotInfo.text : ('Series ' + (i + 1));
    labelString += '<span style="color:' + color + '">' + seriesText + ':</span>' +
      ' ' + nodeInfo.value + '<br>';
  }

  return labelString;
};

// global array for markers since you can only update the whole array
let markersArray = [];
let labelsArray = [];

// hash table for markers
let markerHashTable = {};

/*
* Register a graph click event and then render a chart with the markers
*/
zingchart.bind('chart4Data', 'click', (e) => {
  let xyInformation;
  let nodeIndex;
  let scaleText;

  // make sure not a node click and click happend in plotarea
  if (e.target != 'node' && e.plotarea) {
    xyInformation = zingchart.exec('chart4Data', 'getxyinfo', {
      x: e.ev.clientX,
      y: e.ev.clientY
    });

    // if anything is found, 0 corresponds to scale-x
    if (xyInformation && xyInformation[0] && xyInformation[2]) {
      nodeIndex = xyInformation[0].scalepos;
      scaleText = xyInformation[0].scaletext;

      // check hash table. Add marker
      if (!markerHashTable['nodeindex' + nodeIndex]) {
        let nodeInfo = zingchart.exec('chart4Data', 'getobjectinfo', {
          object: 'node',
          nodeindex: nodeIndex,
          plotindex: 0
        });

        let labelText = formatLabelText(nodeIndex, scaleText);
        let labelId = 'label_' + nodeIndex;
        // create a marker
        let newMarker = new Marker(nodeIndex);
        let newLabel = new Label(labelText, labelId, nodeInfo.x, nodeInfo.y);

        markerHashTable['nodeindex' + nodeIndex] = true;
        markersArray.push(newMarker);

        labelsArray.push(newLabel);

        // render the marker
        chart4Data.scaleX.markers = markersArray;
        chart4Data.labels = labelsArray;
        zingchart.exec('chart4Data', 'setdata', {
          data: chart4Data
        });
      } else {
        console.log('---marker already exists----');
      }
    }
  }
});

/*
* Register a node_click event and then render a chart with the markers
*/
zingchart.bind('chart4Data', 'node_click', (e) => {
  // check hash table. Add marker
  if (!markerHashTable['nodeindex' + e.nodeindex]) {
    let labelText = formatLabelText(e.nodeindex, e.scaletext);
    let labelId = 'label_' + e.nodeindex;
    // create a marker
    let newMarker = new Marker(e.nodeindex, labelText, e.plotindex);
    let newLabel = new Label(labelText, labelId, e.ev.layerX, e.ev.layerY);

    markerHashTable['nodeindex' + e.nodeindex] = true;
    markersArray.push(newMarker);

    labelsArray.push(newLabel);

    // render the marker
    chart4Data.scaleX.markers = markersArray;
    chart4Data.labels = labelsArray;
    zingchart.exec('chart4Data', 'setdata', {
      data: chart4Data
    });
  } else {
    console.log('---marker already exists----');
  }
});

let labelMouseDown = false;
let labelId = null;

/*
* bind mousedown event for dragging label
*/
zingchart.bind('chart4Data', 'label_mousedown', (e) => {
  labelMouseDown = true;
  labelId = e.labelid;
  zingchart.exec('chart4Data', 'hideguide');
});

zingchart.bind('chart4Data', 'mousemove', (e) => {
  if (labelMouseDown && labelId) {
    zingchart.exec('chart4Data', 'updateobject', {
      type: 'label',
      data: {
        id: labelId,
        offsetY: e.ev.layerY
      }
    });
  }
});

zingchart.bind('chart4Data', 'mouseup', () => {
  labelMouseDown = false;
  labelId = null;
  zingchart.exec('chart4Data', 'showguide');
});

zingchart.bind('chart4Data', 'doubleclick', (e) => {
  console.log(e);
});




  // Chart 5: Monthly savings
    let chart5Data = {
    type: 'bar',
    legend: {
      alpha: 0.05,
      borderWidth: '0px',
      layout: 'x2',
      marker: {
        type: 'circle',
        borderColor: 'none',
        size: '10px'
      },
    },
    plot: {
      animation: {
        effect: 'ANIMATION_SLIDE_BOTTOM'
      }
    },
    scaleX: {
      guide: {
        visible: false
      },
      item: {
        fontColor: '#7e7e7e'
      },
      labels: ['BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
      //labels: ['BFE -4 ft', 'BFE -3 ft', 'BFE -2 ft', 'BFE -1 ft', 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
      lineColor: '#7E7E7E'
    },
    scaleY: {
        
      format: "$%v",
      negation: "currency",
      thousandsSeparator: ", ",
      multiplier: true,
        guide: {
          lineStyle: 'solid'
        },
        minorTick: {
          placement: 'cross',
          size: '6px'
        },
        minorTicks: 1
      },
    tooltip: {
      text: '$%v'
    },
    series: [
      {
        text: 'Monthly savings with insurance',
        values: {{total_monthly_saving_json}},
        alpha: 0.95,
        borderRadiusTopLeft: '7px',
        backgroundColor: '#189447',
      },
      {
        text: 'Monthly savings without insurance',
        values: [ 16733, 17088, 17074, 17041, 17006],
        //values: [988, 4412, 8280, 13743, 16733, 17088, 17074, 17041, 17006],
        borderRadiusTopLeft: '7px',
        alpha: 0.95,
        backgroundColor: '#add9be'
      }
    ]
  };

  zingchart.render({
    id: 'chart5Id',
    data: chart5Data,
    width: '500px',
    height:'300px'
  });


  // Chart 6
  // DEFINE DATA
  // -----------------------------
 let chartData = [
    {
      type: 'line', 
      text: 'Monthly savings with insurance',
      values: {{ total_monthly_saving_json}},
      scales: 'scale-x,scale-y',
      lineColor: '#189447',
      legendMarker: {
        type: 'circle'
      },
      tooltip: {
        text: '$%v',
        negation: "currency",
        thousandsSeparator: ", ",
        wrapText: true
      },
      marker: {
        backgroundColor: '#189447'
      }
    },    {
      type: 'line', 
      text: 'Monthly savings without insurance',
      values: [16733, 17088, 17074, 17041, 17006],
      //values: [988, 4412, 8280, 13743, 16733, 17088, 17074, 17041, 17006],
      scales: 'scale-x,scale-y',
      lineColor: '#add9be',
      legendMarker: {
        type: 'circle'
      },
      tooltip: {
        text: '$%v',
        negation: "currency",
        thousandsSeparator: ", ",
        wrapText: true
      },
      marker: {
        backgroundColor: '#add9be'
      }
    },
    {
      type: 'bar',
      text: 'Amortized cost',
      values: {{Amortized_FC_json}},
      scales: 'scale-x,scale-y',
      backgroundColor: '#ff614f',
      borderRadiusTopLeft: '7px',
      alpha: 0.90,
      tooltip: {
        text: '$%v',
        negation: "currency",
        thousandsSeparator: ", ",
        wrapText: true
      }
    },
    {
      type: 'bar',
      text: 'Insurance savings per month',
      values: {{monthly_premium_saving_json}},
      scales: 'scale-x,scale-y',
      backgroundColor: '#07d9a4',
      borderRadiusTopLeft: '7px',
      alpha: 0.90,
      tooltip: {
        text: '$%v',
        negation: "currency",
        thousandsSeparator: ", ",
        wrapText: true
      }
    },
    {
      type: 'bar', 
      text: 'Reduction in expected flood loss per month',
      values: {{monthly_avoided_loss_json}},
      scales: 'scale-x,scale-y',
      backgroundColor: '#2480bf',
      borderRadiusTopLeft: '7px',
      alpha: 0.90,
      tooltip: {
        text: '$%v',
        negation: "currency",
        thousandsSeparator: ", ",
        wrapText: true
      }
    }

  ];

let chartConfig = {
    type: 'mixed',
    legend:{
     layout: '2x3' ,
     margin: '10 0 10 0',
     x: '38%',
     borderColor: 'whtie'
    },
    scaleX: {
      values: [ 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
      //values: ['BFE -4 ft', 'BFE -3 ft', 'BFE -2 ft', 'BFE -1 ft', 'BFE +0 ft', 'BFE +1 ft', 'BFE +2 ft', 'BFE +3 ft', 'BFE +4 ft'],
      guide: {
        lineColor: '#BDBDBD',
        lineStyle: 'solid'
      },
      label: {
        text: 'BFE + Freeboard (ft)'
      },
    },
    scaleY: {  
    format: "$%v",
    negation: "currency",
    thousandsSeparator: ", ",
    multiplier: true,
      guide: {
        lineStyle: 'solid'
      },
      minorTick: {
        placement: 'cross',
        size: '6px'
      },
      minorTicks: 1
    },
    {% comment %} 
    scaleY2: {
    format: '%v',    
    negation: "currency",
    guide: {
      visible: false
    },
    label: {
      text: 'Y-2 label'
    },
    zooming: true
  }, 
  {% endcomment %}
    crosshairX: {
      plotLabel: {
        visible: false
      }
    },
    series: chartData
  };



  // RENDER CHARTS
  // -----------------------------

  // Chart 1
  zingchart.render({ 
    id: chart1Id, 
    data : chart1Data, 
    width: '500px',
    height:'300px'
  });


  // Chart 2
  zingchart.render({ 
    id: chart2Id, 
    data : chart2Data, 
    width: '500px',
    height:'300px'
  });

  // Chart 3
  zingchart.render({ 
    id: chart3Id, 
    data : chart3Data, 
    width: '500px',
    height:'300px'
  });

  // Chart 4
  zingchart.render({ 
    id: chart4Id, 
    data : chart4Data, 
    width: '500px',
    height:'300px'
  });

  // Chart 5
  zingchart.render({ 
    id: chart5Id, 
    data : chart5Data, 
    width: '500px',
    height:'300px'
  });

  // Chart 6
  zingchart.render({
    id: 'myChart',
    data: chartConfig,
    width: '500px',
    height:'300px'
  });

  var ctx = document.getElementById('chart').getContext('2d');

  var chart = (ctx, {
            type: 'line',
            data: {
                labels: ['+0ft freeboard','+`0`ft freeboard'],
                datasets: [{
                    label: 'My First dataset',
                    backgroundColor: '#33b5e5',
                    borderColor: '#33b5e5',
                    data: [15,10]   
                }]
            },
            options: {
              responsive:true,
              legend:{
                display:false,
              },
              title: {
                display:false,
                text:'Text',
              },
              
              scales: {
                xAxes: [{
                  display: true
                }],
                yAxes: [{
                  display: true,
                  scaleLabel: {
                    display: true,
                    labelString: 'dollar',
                  },
                  ticks: {
                    min: 0,
                    stepSize: 10
                  }
                }]
              }
            }
    }); 
    </script>
    

    <!-- Scroll Up -->
    <div id="back-top" >
        <a title="Go to Top" href="#"> <i class="fas fa-level-up-alt"></i></a>
    </div>
      <script src = "https://code.highcharts.com/highcharts.js"></script>
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-2.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-2.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-tables-2.2.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.pydata.org/bokeh/release/bokeh-api-2.2.1.min.js"></script> 
    <!-- {{script_insurance | safe}}-->
    <script src="./static/js/disclaimer.js"></script>
    <!-- Jquery-->
    <script src="./static/js/vendor/jquery-1.12.4.min.js"></script>

    

<!-- Accessibility Code for "floodsafehome.lsu.edu" -->
<script> 
    window.interdeal = { 
        "sitekey": "e8d3d174e189523ecbfdacfddd4c53b8", 
        "Position": "Left", 
        "Menulang": "EN", 
        "domains": { "js": "https://cdn.equalweb.com/", 
        "acc": "https://access.equalweb.com/" }, 
        "btnStyle": { "vPosition": [ "80%", null ], 
        "scale": [ "0.5", "0.5" ], 
        "icon": { "type": 7, 
        "shape": "semicircle", "outline": false }, 
        "color": { "main": "#1876c9", "second": "" } 
        } }; 
        
    (function(doc, head, body) { 
        var coreCall = doc.createElement('script'); 
        coreCall.src = 'https://cdn.equalweb.com/core/2.1.10/accessibility.js'; 
        coreCall.defer = true; 
        coreCall.integrity = 'sha512-PWvjZ/e9EGeHEPppEOqscViKxQIW1/5rJeFedXLJiv0IrltJPvuhrYOiUsOkQ49FaZ5HSDp51/O/6V9uL2nNIA=='; 
        coreCall.crossOrigin = 'anonymous'; coreCall.setAttribute('data-cfasync', true ); 
        body? body.appendChild(coreCall) : head.appendChild(coreCall); })
    (document, document.head, document.body); 
</script>
<!-- Accessibility Code for "floodsafehome.lsu.edu" end-->



<script>
// Creating a function to add item from list
function addItem() {
        var a = document.getElementById("list");
        var candidate = document.getElementById("user-input-co");
        var li = document.createElement("li");
        li.setAttribute('id', candidate.value);
        li.appendChild(document.createTextNode(candidate.value));
        a.appendChild(li);
        
        addr_list_str = document.getElementById("addr_list").value
        if(addr_list_str.length == 0) {
          document.getElementById("addr_list").value =  a.textContent
        } else {
          //document.getElementById("addr_list").value = document.getElementById("addr_list").value + "$$" + a.textContent
          document.getElementById("addr_list").value =  a.textContent
        }
    }

// Creating a function to remove item from list
function removeItem() {

    // Declaring a varible to get select element
    var a = document.getElementById("list");
    var candidate = document.getElementById("user-input-co");
    var item = document.getElementById(candidate.value);
    a.removeChild(item);}
</script> 


<!--CRS rate selection-->
<script>
function myFunction() {
  var x = document.getElementById("crsRate").value;
  document.getElementById("crsRate_value").innerHTML = ", with a " + x + "% discount";
  }
</script>
<!--CRS rate selection end-->

<!--Advanced parameters -->
<script>
function show(nr) {
    document.getElementById("table1").style.display="none";
    document.getElementById("table"+nr).style.display="block";
}
</script>
<!--Advanced parameters end-->

<!--Banner: under construction-->
    <script>
    document.querySelector(".banner__close").addEventListener("click", function () {
        this.closest(".banner").style.display = "none";
    });
    </script>

<!--screenshot to pdf
<script>
function genScreenshot() {
    html2canvas(document.body, {
      onrendered: function(canvas) {
      $('#createpd').html("");
			$('#createpd').append(canvas);
      
      if (navigator.userAgent.indexOf("MSIE ") > 0 || 
					navigator.userAgent.match(/Trident.*rv\:11\./)) 
			{
      	var blob = canvas.msToBlob();

        window.navigator.msSaveBlob(blob,'Test file.png');
        
      }
      else   {
        
        $('#test').attr('href', canvas.toDataURL("../static/img/logo"));
        doc = new jsPDF({
                     unit: 'px',
                     format: 'a4'
                 });
                doc.addImage(canvas.toDataURL("../static/img/logo"), 'PNG', 0, 0);
                doc.save('Freeboard_Report.pdf');
                form.width(cache_width);
        $('#test').attr('download','Test file.png');
        $('#test')[0].click();
         }
      
      
      }
    });
}
</script>-->
<!--screenshot to pdf ends-->


<!--JavaScript for saving as a pdf file-->
<script>
$("#downloadPDF").click(function () {
  // $("#content2").addClass('ml-215'); // JS solution for smaller screen but better to add media queries to tackle the issue
  getScreenshotOfElement(
    $("div#content2").get(0),
    0,
    0,
    $("#content2").width() + 45,  // added 45 because the container's (content2) width is smaller than the image, if it's not added then the content from right side will get cut off
    $("#content2").height() + 30, // same issue as above. if the container width / height is changed (currently they are fixed) then these values might need to be changed as well.
    function (data) {
      var pdf = new jsPDF("l", "pt", [
        $("#content2").width(),
        $("#content2").height(),
      ]);

      pdf.addImage(
        "data:image/png;base64," + data,
        "PNG",
        0,
        0,
        $("#content2").width(),
        $("#content2").height()
      );
      pdf.save("azimuth-certificte.pdf");
    }
  );
});

// this function is the configuration of the html2cavas library (https://html2canvas.hertzen.com/)
// $("#content2").removeClass('ml-215'); is the only custom line here, the rest comes from the library.
function getScreenshotOfElement(element, posX, posY, width, height, callback) {
  html2canvas(element, {
    onrendered: function (canvas) {
      // $("#content2").removeClass('ml-215');  // uncomment this if resorting to ml-125 to resolve the issue
      var context = canvas.getContext("2d");
      var imageData = context.getImageData(posX, posY, width, height).data;
      var outputCanvas = document.createElement("canvas");
      var outputContext = outputCanvas.getContext("2d");
      outputCanvas.width = width;
      outputCanvas.height = height;

      var idata = outputContext.createImageData(width, height);
      idata.data.set(imageData);
      outputContext.putImageData(idata, 0, 0);
      callback(outputCanvas.toDataURL().replace("data:../static/img/logo/png;base64,", ""));
    },
    width: width,
    height: height,
    useCORS: true,
    taintTest: false,
    allowTaint: false,
  });
}
</script>
</body> 
</html>



